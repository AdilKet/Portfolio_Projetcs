<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOTO FCPE</title>
    <link rel="stylesheet" href="styles2.css"> <!-- Lien vers la feuille de style CSS -->
</head>
<body>
    <div class="container">
        <h1>LOTO 2023</h1> <!-- Titre de la page -->
        <img id="logoFCPE" src="FCPE.webp" alt="logo FCPE">
        <p id="message">Cliquez pour commencer le tirage!</p> <!-- Paragraphe affichant le message -->
        <button id="drawButton">Tirer un numéro</button> <!-- Bouton pour tirer un numéro -->
        <div id="fireworks"></div> <!-- Conteneur pour l'animation de feu d'artifice -->
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- Lien vers jQuery -->

    <script>
        // Définition de la fonction getRandomColor qui génère une couleur hexadécimale aléatoire
        function getRandomColor() {
            var letters = '0123456789ABCDEF'; // Liste des caractères hexadécimaux
            var color = '#'; // Initialisation de la couleur avec le symbole "#" pour les couleurs hexadécimales
            for (var i = 0; i < 6; i++) { // Boucle pour générer 6 caractères hexadécimaux pour la couleur
                color += letters[Math.floor(Math.random() * 16)]; // Ajout d'un caractère hexadécimal aléatoire à la couleur
            }
            return color; // Retourne la couleur générée
        }

        // Attente du chargement du document HTML
        $(document).ready(function() {
            // Ajout d'un gestionnaire d'événement au clic sur le bouton "drawButton"
            $("#drawButton").click(function() {
                startCountdown(); // Appel de la fonction startCountdown au clic sur le bouton
            });
        });

        // Définition de la fonction startCountdown qui initialise le compte à rebours
        function startCountdown() {
            var remainingTime = 3; // Durée initiale du compte à rebours en secondes
            var messageElement = $("#message"); // Sélection de l'élément HTML avec l'id "message"
            messageElement.text("Le tirage commence dans " + remainingTime + " secondes..."); // Affichage du message initial

            // Définition de l'intervalle de compte à rebours
            var countdownInterval = setInterval(function() {
                remainingTime--; // Décrémentation du temps restant
                if (remainingTime > 0) {
                    messageElement.text("Le tirage commence dans " + remainingTime + " secondes..."); // Mise à jour du message de compte à rebours
                } else {
                    clearInterval(countdownInterval); // Arrêt de l'intervalle de compte à rebours lorsque le temps restant est écoulé
                    showWinner(); // Appel de la fonction showWinner pour afficher le numéro gagnant
                }
            }, 1000); // Intervalle de 1 seconde pour la mise à jour du compte à rebours
        }

        // Définition de la fonction showWinner qui affiche le numéro gagnant
        function showWinner() {
            var messageElement = $("#message"); // Sélection de l'élément HTML avec l'id "message"
            messageElement.text("Félicitations ! Le numéro gagnant est : "); // Affichage du message de félicitations

            var winningNumber = Math.floor(Math.random() * 69) + 1; // Génération d'un numéro aléatoire entre 1 et 69
            messageElement.append(`<span class="winningNumber">${winningNumber}</span>`); // Ajout du numéro gagnant à l'élément "message"

            // Animation de feu d'artifice
            animateFireworks();
        }

        // Définition de la fonction animateFireworks qui anime l'affichage des feux d'artifice
        function animateFireworks() {
            var fireworksContainer = $("#fireworks"); // Sélection de l'élément HTML avec l'id "fireworks" (conteneur des feux d'artifice)

            // Création de nombreux divs avec la classe "firework" pour représenter les feux d'artifice
            for (var i = 0; i < 100; i++) {
                var firework = $("<div></div>").addClass("firework"); // Création d'un div avec la classe "firework"
                fireworksContainer.append(firework); // Ajout du div au conteneur des feux d'artifice

                // Génération d'une couleur aléatoire pour chaque feu d'artifice
                var color = getRandomColor();
                firework.css("background-color", color); // Application de la couleur au feu d'artifice
            }

            // Animation de chaque div "firework"
            $(".firework").each(function() {
                var firework = $(this); // Sélection du div "firework" actuel
                var x = Math.random() * 100; // Position horizontale aléatoire
                var y = Math.random() * 100; // Position verticale aléatoire
                var size = Math.random() * 20 + 5; // Taille aléatoire
                var duration = Math.random() * 4 + 1; // Durée de l'animation aléatoire (augmentée)

                // Animation de la translation et de l'opacité du feu d'artifice
                firework.css({
                    "left": x + "%",
                    "top": y + "%",
                    "width": size + "px",
                    "height": size + "px",
                    "animation-duration": duration + "s" // Durée de l'animation
                });

                // Suppression du feu d'artifice après l'animation
                firework.on("animationend", function() {
                    firework.remove(); // Suppression du feu d'artifice du DOM
                });
            });
        }

            // ce script contrôle le comportement interactif de la page, en générant un nombre aléatoire, 
            //en affichant le compte à rebours et en animant les feux d'artifice 
            //lorsqu'un numéro gagnant est tiré.
    </script> <!-- Script JavaScript -->
</body>
</html>
